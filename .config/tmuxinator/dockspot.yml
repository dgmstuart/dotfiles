# /Users/dgmstuart/.config/tmuxinator/dockspot.yml

name: dockspot
root: ~/dev/dockspot

on_project_start: brew services start redis
on_project_restart: git checkout main; bin/apply_updates; git checkout -

windows:
  - editor: dirty
  - server: bin/rails server
  - console: bin/rails console
  - builders:
      layout: even-horizontal
      panes:
        - nvm use; npm run build -- --watch
        - npm run build:css -- --watch
  - jobs/cable:
      layout: even-horizontal
      panes:
        - bundle exec rake solid_queue:start
        - WEB_CONCURRENCY=0 PORT=28080 bundle exec puma config/cable.ru
  - ngrok:
      layout: even-horizontal
      panes:
        - ngrok http --domain=dockspot-duncan.ngrok.dev 3000
        - stripe listen --forward-to "https://dockspot-duncan.ngrok.dev/stripe_webhook?account=eu" -l
